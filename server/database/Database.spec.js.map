{"version":3,"file":"Database.spec.js","sourceRoot":"","sources":["Database.spec.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,sDAAgC;AAChC,wDAAkC;AAClC,yDAAmD;AAEnD,QAAQ,CAAC,UAAU,EAAE;IACpB,UAAU,CAAC;QACV,kBAAQ,CAAC,OAAO,GAAG,IAAI,CAAC,EAAE,EAAE,CAAC;QAC7B,kBAAQ,CAAC,KAAK,GAAG,IAAI,CAAC,EAAE,EAAE,CAAC;QAC3B,OAAO,CAAC,GAAG,GAAG,IAAI,CAAC,EAAE,EAAE,CAAC;IACzB,CAAC,CAAC,CAAC;IAEH,QAAQ,CAAC,SAAS,EAAE;QACnB,EAAE,CAAC,sCAAsC,EAAE;;;4BAC1C,qBAAM,kBAAQ,CAAC,OAAO,EAAE,EAAA;;wBAAxB,SAAwB,CAAC;wBAEzB,MAAM,CAAC,kBAAQ,CAAC,OAAO,CAAC,CAAC,gBAAgB,EAAE,CAAC;wBAC5C,MAAM,CAAC,OAAO,CAAC,GAAG,CAAC;6BACjB,oBAAoB,CAAC,qCAAqC,CAAC,CAAC;;;;aAC9D,CAAC,CAAC;QAEH,EAAE,CAAC,wCAAwC,EAAE;;;;wBAC5C,kBAAQ,CAAC,OAAO,GAAG,IAAI,CAAC,EAAE,EAAE,CAAC,kBAAkB,CAAC;4BAC/C,MAAM,0BAAU,CAAC;wBAClB,CAAC,CAAC,CAAC;wBAEH,qBAAM,kBAAQ,CAAC,OAAO,EAAE,EAAA;;wBAAxB,SAAwB,CAAC;wBAEzB,MAAM,CAAC,OAAO,CAAC,GAAG,CAAC;6BACjB,oBAAoB,CAAC,2CAA2C,CAAC,CAAC;wBACpE,MAAM,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC,oBAAoB,CAAC,0BAAU,CAAC,CAAC;;;;aACrD,CAAC,CAAC;IACJ,CAAC,CAAC,CAAC;AACJ,CAAC,CAAC,CAAC","sourcesContent":["import mongoose from 'mongoose';\r\nimport Database from './Database';\r\nimport {TEST_ERROR} from '../common/specConstants';\r\n\r\ndescribe('Database', () => {\r\n\tbeforeEach(() => {\r\n\t\tmongoose.connect = jest.fn();\r\n\t\tmongoose.model = jest.fn();\r\n\t\tconsole.log = jest.fn();\r\n\t});\r\n\r\n\tdescribe('connect', () => {\r\n\t\tit('should establish database connection', async () => {\r\n\t\t\tawait Database.connect();\r\n\r\n\t\t\texpect(mongoose.connect).toHaveBeenCalled();\r\n\t\t\texpect(console.log)\r\n\t\t\t\t.toHaveBeenCalledWith('Connection to database established!');\r\n\t\t});\r\n\r\n\t\tit('should log database connection failure', async () => {\r\n\t\t\tmongoose.connect = jest.fn().mockImplementation(() => {\r\n\t\t\t\tthrow TEST_ERROR;\r\n\t\t\t});\r\n\r\n\t\t\tawait Database.connect();\r\n\r\n\t\t\texpect(console.log)\r\n\t\t\t\t.toHaveBeenCalledWith('Connection to database failed! Error log:');\r\n\t\t\texpect(console.log).toHaveBeenCalledWith(TEST_ERROR);\r\n\t\t});\r\n\t});\r\n});\r\n"]}