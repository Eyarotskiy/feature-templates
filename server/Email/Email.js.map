{"version":3,"file":"Email.js","sourceRoot":"","sources":["Email.ts"],"names":[],"mappings":";;;;;AAAA,mDAA6B;AAC7B,IAAM,UAAU,GAAG,OAAO,CAAC,YAAY,CAAC,CAAC;AAEzC;IAAA;IAoDA,CAAC;IAnDA,qCAAqB,GAArB,UAAsB,KAAa;QAClC,IAAM,KAAK,GAAG,aAAG,CAAC,aAAa,CAAC,KAAK,CAAC,CAAC;QACvC,IAAM,WAAW,GAAG;YACnB,IAAI,EAAE,OAAO,CAAC,GAAG,CAAC,WAAW;YAC7B,EAAE,EAAE,KAAK;YACT,OAAO,EAAE,2BAA2B;YACpC,IAAI,EAAE,IAAI,CAAC,qBAAqB,CAAC,KAAK,CAAC;SACvC,CAAC;QAEF,OAAO,IAAI,CAAC,cAAc,EAAE,CAAC,QAAQ,CAAC,WAAW,CAAC,CAAC;IACpD,CAAC;IAEO,8BAAc,GAAtB;QACC,OAAO,UAAU,CAAC,eAAe,CAAC;YACjC,IAAI,EAAE,gBAAgB;YACtB,IAAI,EAAE,GAAG;YACT,MAAM,EAAE,KAAK;YACb,IAAI,EAAE;gBACL,IAAI,EAAE,OAAO,CAAC,GAAG,CAAC,WAAW;gBAC7B,IAAI,EAAE,OAAO,CAAC,GAAG,CAAC,cAAc;aAChC;YACD,GAAG,EAAE;gBACJ,kBAAkB,EAAE,KAAK;aACzB;SACD,CAAC,CAAC;IACJ,CAAC;IAEO,qCAAqB,GAA7B,UAA8B,KAAa;QAC1C,OAAO,wNAK4C,KAAK,8jBAgBvD,CAAC;IACH,CAAC;IACF,YAAC;AAAD,CAAC,AApDD,IAoDC;AAED,kBAAe,IAAI,KAAK,EAAE,CAAC","sourcesContent":["import Api from '../Api/Api';\r\nconst nodemailer = require('nodemailer');\r\n\r\nclass Email {\r\n\tsendConfirmationEmail(email: string) {\r\n\t\tconst token = Api.generateToken(email);\r\n\t\tconst mailOptions = {\r\n\t\t\tfrom: process.env.EMAIL_LOGIN,\r\n\t\t\tto: email,\r\n\t\t\tsubject: 'Confirm Your Registration',\r\n\t\t\thtml: this.getConfirmationMarkup(token),\r\n\t\t};\r\n\r\n\t\treturn this.getTransporter().sendMail(mailOptions);\r\n\t}\r\n\r\n\tprivate getTransporter() {\r\n\t\treturn nodemailer.createTransport({\r\n\t\t\thost: 'smtp.gmail.com',\r\n\t\t\tport: 587,\r\n\t\t\tsecure: false,\r\n\t\t\tauth: {\r\n\t\t\t\tuser: process.env.EMAIL_LOGIN,\r\n\t\t\t\tpass: process.env.EMAIL_PASSWORD,\r\n\t\t\t},\r\n\t\t\ttls: {\r\n\t\t\t\trejectUnauthorized: false,\r\n\t\t\t},\r\n\t\t});\r\n\t}\r\n\r\n\tprivate getConfirmationMarkup(token: string) {\r\n\t\treturn `\r\n\t\t\t<div style=\"padding: 20px;\">\r\n\t\t\t\t<p style=\"padding-bottom: 20px;\">\r\n\t\t\t\t\tOpen the link below to confirm your account:\r\n\t\t\t\t</p>\r\n\t\t\t\t<a href=\"http://localhost:3000/confirmation?id=${token}\"\r\n\t\t\t\t\t\t style=\"background-color: #65b6ef; \r\n\t\t\t\t\t\t\t\t\t\twidth: 100px; \r\n\t\t\t\t\t\t\t\t\t\theight: 40px; \r\n\t\t\t\t\t\t\t\t\t\ttext-decoration: none; \r\n\t\t\t\t\t\t\t\t\t\tcolor: #fff; \r\n\t\t\t\t\t\t\t\t\t\tpadding: 20px; \r\n\t\t\t\t\t\t\t\t\t\tfont-weight: 700; \r\n\t\t\t\t\t\t\t\t\t\tfont-size: 18px; \r\n\t\t\t\t\t\t\t\t\t\tletter-spacing: 1px; \r\n\t\t\t\t\t\t\t\t\t\ttext-shadow: 1px 1px 1px #000; \r\n\t\t\t\t\t\t\t\t\t\tborder-radius: 3px; \r\n\t\t\t\t\t\t\t\t\t\tborder: 1px solid #000;\">\r\n\t\t\t\t\tConfirmation Link\r\n\t\t\t\t</a>\r\n\t\t\t</div>\r\n\t\t`;\r\n\t}\r\n}\r\n\r\nexport default new Email();\r\n"]}